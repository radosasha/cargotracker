# ============================================
# CI/CD Profile - For GitHub Actions, GitLab CI, etc.
# ============================================

# Maximum memory for CI
# WHY: CI servers usually have 7-8GB RAM
# SAFE: 8GB for Gradle + 4GB for Kotlin daemon = 12GB total
org.gradle.jvmargs=-Xmx8192M -XX:MaxMetaspaceSize=1024M -XX:+HeapDumpOnOutOfMemoryError -XX:+UseParallelGC -Dfile.encoding=UTF-8
kotlin.daemon.jvmargs=-Xmx4096M -XX:+UseParallelGC

# Disable Daemon on CI
# WHY: Each CI build is a fresh process (daemon doesn't help)
# EFFECT: Saves memory and prevents daemon issues
org.gradle.daemon=false

# Enable all checks
# WHY: CI should catch all issues
android.lint.checkReleaseBuilds=true
android.lint.abortOnError=true

# Note: android.enableR8 is deprecated in AGP 7.0+
# R8 is automatically enabled for release builds

# Parallel build
# WHY: CI servers usually have 2-4 cores
# SAFE: 4 workers for typical CI server
org.gradle.parallel=true
org.gradle.workers.max=4

# Build Cache
# WHY: CI can reuse cache between builds
# WORKS: Speeds up repeated CI builds
org.gradle.caching=true

# Disable Configuration Cache on CI
# WHY: Can be unstable with some CI setups
# SAFE: Avoids cache corruption issues
org.gradle.configuration-cache=false

# Build all targets
# WHY: CI should build both Android and iOS
kotlin.native.enabled=true

# Keep these optimizations
kotlin.incremental=true
kotlin.caching.enabled=true
kotlin.parallel.tasks.in.project=true
android.useAndroidX=true
android.nonTransitiveRClass=true
android.nonFinalResIds=true
android.enableJetifier=false
kotlin.native.ignoreDisabledTargets=true
kotlin.native.cacheKind=static
kotlin.native.parallel.threads=4
room.incremental=true
ksp.incremental=true
ksp.incremental.log=false